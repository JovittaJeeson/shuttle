{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Booking Calender </title>

        <!--==================== BOOTSTRAP CSS ====================-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

        <!--==================== CSS ====================-->
        <link rel="stylesheet" href="{% static 'cssBooking/styles.css' %}">

        <!--==================== FONT ====================-->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">

        <style>
            .error {
                color: red;
                font-size: 12px; /* Adjust the font size as needed */
            }
        </style>
    </head>

    <body>
        
        <!--==================== MAIN ====================-->
        <main class="main">
            <!--==================== CALENDAR ====================-->
            <div class="calendar-wrapper" id="booking-calendar">
                <header>
                    <p class="current-date">October 2023</p>
                    <div class="icons">
                        <span id="prev" class="material-symbols-rounded">chevron_left</span>
                        <span id="next" class="material-symbols-rounded">chevron_right</span>
                    </div> 
                </header>
                <div class="calendar">
                    <div>
                        <ul class="weeks">
                            <li>Sun</li>
                            <li>Mon</li>
                            <li>Tue</li>
                            <li>Wed</li>
                            <li>Thu</li>
                            <li>Fri</li>
                            <li>Sat</li>
                        </ul>
                        <ul class="days">
                            <li class="inactive">25</li>
                            <li class="inactive">26</li>
                            <li class="inactive">27</li>
                            <li class="inactive">28</li>
                            <li class="inactive">29</li>
                            <li class="inactive">30</li>
                            <li id="open-booking-time-btn" onclick="openBookingTimeModal()">1</li>
                            <li>2</li>
                            <li>3</li>
                            <li>4</li>
                            <li>5</li>
                            <li>6</li>
                            <li>7</li>
                            <li>8</li>
                            <li>9</li>
                            <li>10</li>
                            <li>11</li>
                            <li>12</li>
                            <li>13</li>
                            <li>14</li>
                            <li>15</li>
                            <li>16</li>
                            <li>17</li>
                            <li>18</li>
                            <li>19</li>
                            <li>20</li>
                            <li>21</li>
                            <li>22</li>
                            <li>23</li>
                            <li>24</li>
                            <li class="active">25</li>
                            <li>26</li>
                            <li>27</li>
                            <li>28</li>
                            <li>29</li>
                            <li>30</li>
                            <li>31</li>
                            <li class="inactive">1</li>
                            <li class="inactive">2</li>
                            <li class="inactive">3</li>
                            <li class="inactive">4</li>
                            <li class="inactive">5</li>
                        </ul>
                    </div>
                  
    
    
                    <!--==================== BOOKING TIME MODAL ====================-->
                    <div class="booking-time-modal" id="booking-time-modal">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <h2>Time Select</h2>
                            <p>Pick and reserve a time slot with me for a variety of services!</p>
                                <div class="booking-time">
                                    <ul class="booking-time-list">
                                        <li><div class="time-block" id="open-booking-btn" onclick="openBookingModal()">4:00AM - 5:00AM</div></li>
                                        <li><div class="time-block" data-time="6:00AM - 7:00AM">6:00AM - 7:00AM</div></li>
                                        <li><div class="time-block" data-time="7:00AM - 8:00AM">7:00AM - 8:00AM</div></li>
                                        <li><div class="time-block" data-time="9:00AM - 10:00AM">9:00AM - 10:00AM</div></li>
                                        <li><div class="time-block" data-time="10:00AM - 11:00PM">10:00AM - 11:00AM</div></li>
                                        <li><div class="time-block" data-time="5:00PM - 6:00PM">5:00PM - 6:00PM</div></li>
                                        <li><div class="time-block" data-time="6:00AM - 7:00PM">6:00PM - 7:00PM</div></li>
                                        <li><div class="time-block" data-time="7:00PM - 8:00PM">7:00PM - 8:00PM</div></li>
                                        <li><div class="time-block" data-time="8:00PM - 9:00PM">8:00PM - 9:00PM</div></li>
                                        <li><div class="time-block" data-time="9:00PM - 10:00PM">9:00PM - 10:00PM</div></li>
                        
                                    </ul>
                                </div>
                            <button type="button" class="close-btn" onclick="closeBookingTimeModal()">&times;</button>
                        </div>
                    </div>
                    <!--==================== BOOKING FORM MODAL ====================-->
                    <div class="booking-modal" id="booking-modal">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <h2>Booking Form</h2>
                            <p>Book now and secure your Court </p>
                            <form method="post" action="{% url 'Guestbooking' %}">
                                {% csrf_token %}
                                <div class="client-name">
                                    <label for="client-name"><h6>Name:</h6></label>
                                    <input type="text" id="client-name" name="client-name" required>
                                    <span id="nameError" class="error"></span><!-- Error message for name -->
                                </div>
                                <div class="client-email">
                                    <label for="client-email"><h6>Email:</h6></label>
                                    <input type="email" id="client-email" name="client-email" required>
                                    <span id="emailError" class="error"></span><!-- Error message for email -->
                                </div>
                                <div class="client-phone">
                                    <label for="client-phone"><h6>Phone:</h6></label>
                                    <input type="tel" id="client-phone" name="client-phone">
                                    <span id="phoneError" class="error"></span><!-- Error message for phone -->
                                </div>
                                    <div class="client-phone">
                                        <label for="booking-date"><h6>Booking Date:</h6></label>
                                        <input type="tel" id="booking-date" name="booking-date">
                                    </div>
                                    
                                    <div class="client-phone">
                                        <label for="booking-time"><h6>Booking Time:</h6></label>
                                        <input type="tel" id="booking-time" name="booking-time">
                                    </div>

                                    <input type="hidden" name="booking_date" id="booking-date">
                                    <input type="hidden" name="booking_time" id="booking-time">
                                    
                                    <button type="submit" id="booking-submit-button pay-btn"  
                                    style="background-color: #0074D9; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Submit</button>
                                <button type="button" class="close-btn" onclick="closeBookingModal()">&times;</button>
                       
                                    
                            </div>
                                
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer>

        </footer>
        <!-- ... (previous HTML code) ... -->
        
<!--==================== MAIN JS ====================-->
<script>
    // JavaScript code to disable click events for past and future dates// JavaScript code to disable click events for past and future dates
function disablePastAndFutureDates() {
    const today = new Date();
    const currentYear = today.getFullYear();
    const currentMonth = today.getMonth();
    const days = document.querySelectorAll(".days li");

    days.forEach((day) => {
        const date = parseInt(day.innerText);
        if (
            (date < today.getDate() && currentMonth === today.getMonth()) ||
            (currentMonth > today.getMonth() && currentYear === today.getFullYear()) ||
            (currentYear > today.getFullYear())
        ) {
            day.classList.add("inactive");
            day.removeAttribute("onclick"); // Disable click events
        }
    });
}

// Call the function to disable past and future dates when the page loads
window.addEventListener("load", disablePastAndFutureDates);



    function validateName() {
        var name = document.getElementById("client-name").value;
        var letters = /^[A-Za-z ]*$/;
        if (!letters.test(name) || name.length < 3) {
            document.getElementById("nameError").textContent =
                "Name should only contain alphabets and be at least 3 characters long";
            return false;
        } else {
            document.getElementById("nameError").textContent = "";
            return true;
        }
    }
    
    function validateEmail() {
        var email = document.getElementById("client-email").value;
        var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
        if (!emailPattern.test(email)) {
            document.getElementById("emailError").textContent =
                "Please enter a valid email address";
            return false;
        } else {
            document.getElementById("emailError").textContent = "";
            return true;
        }
    }
    
    function validateIndianPhoneNumber() {
        var phone = document.getElementById("client-phone").value;
        var phonePattern = /^[0-9]*$/;
        if (!phonePattern.test(phone) || phone.length !== 10) {
            document.getElementById("phoneError").textContent =
                "Indian phone number should contain 10 digits";
            return false;
        } else {
            document.getElementById("phoneError").textContent = "";
            return true;
        }
    }
    
    // Add event listeners to form fields for real-time validation
    document.getElementById("client-name").addEventListener("input", validateName);
    document.getElementById("client-email").addEventListener("input", validateEmail);
    document.getElementById("client-phone").addEventListener("input", validateIndianPhoneNumber);
    


    
    
      var options = {
         
        // Enter the Key ID generated from the Dashboard
        key: "{{ razorpay_merchant_key }}", 
         
        // Amount is in currency subunits.
        // Default currency is INR. Hence, 
        // 50000 refers to 50000 paise
        amount: "{{ razorpay_amount }}", 
        currency: "{{ currency }}",
         
        // Your/store name.
        name: "Dj Razorpay", 
         
        // Pass the `id` obtained in the response of Step 1
        order_id: "{{ razorpay_order_id }}", 
        callback_url: "{{ callback_url }}",
      };
       
      // initialise razorpay with the options.
      var rzp1 = new Razorpay(options);
       
      // add event listener to the payment button.
      document.getElementById("pay-btn").onclick = function (e) {
        rzp1.open();
        e.preventDefault();
      };

</script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
        <!--==================== CALENDAR JS ====================-->
        <script src="{% static 'jsbooking/calendar.js' %}" defer></script>
        
        <!--==================== JQUERY ====================-->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" 
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" 
        crossorigin="anonymous"></script>
     
        <!--==================== MAIN JS ====================-->
        <!-- <script src="js/main.js"></script> -->
    </body>
</html>